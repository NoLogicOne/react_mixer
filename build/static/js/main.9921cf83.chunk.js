(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,n,t){e.exports=t(35)},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"groups",function(){return d}),t.d(a,"mix",function(){return f}),t.d(a,"saves",function(){return v});var r=t(0),o=t.n(r),i=t(5),c=t.n(i),l=t(7),u=t(3),s=t(11),m=t(12),p={groups:{group1:{isSample:!0},group2:{},group3:{}},mix:"",saves:{save1:{human_name:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430 \u041f\u0438\u0442\u0435\u0440",sample:"\u0421\u043f\u0431\n\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\n\u041f\u0438\u0442\u0435\u0440"}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.groups,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.text,r=n.idx,o=(n.name,n.sample),i=Object(m.a)({},e);switch(t){case"ADD_WINDOW":return i["group"+(Object.keys(e).length+1)]={},i;case"INPUT_TEXT":return i[r].sample=a,i;case"CHANGE_WINDOW":return i[r].isSample=!i[r].isSample,i;case"LOAD_SAMPLE":return i[r].sample=o,i;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.mix,n=arguments.length>1?arguments[1]:void 0,t=n.groups,a=n.value;switch(n.type){case"GET_MIX":var r=[];for(var o in t)r.push(t[o].sample);var i=r.filter(function(e){return!!e}).map(function(e){return e.split("\n")});return g(i).filter(function(e){return e!==[]}).join("\n").trim();case"ON_MIX_CHANGE":return a;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.saves,n=arguments.length>1?arguments[1]:void 0,t=n.sample,a=n.name,r=Object(m.a)({},e);switch(n.type){case"SAVE_SAMPLE":if(!a)return e;var o=[],i="save"+Date.now();for(var c in e)o.push(e[c].human_name);if(o.includes(a)){if("\u0434\u0430"!==prompt("\u0422\u0430\u043a\u043e\u0435 \u0438\u043c\u044f \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c?","\u0434\u0430"))return e;for(var l in e)if(e[l].human_name===a){i=l;break}}return r[i]={},r[i].human_name=a,r[i].sample=t,r;case"DELETE_SAVE":return delete r[a],r;default:return e}},g=function(e){return e.reduce(function(e,n){return 0===e.length?n:0===n.length?e:(t=e,n.reduce(function(e,n){return[].concat(Object(s.a)(e),Object(s.a)(t.map(function(e){return e+" "+n})))},[]));var t},[])},h=t(16),_=t(17),E=t(22),x=t(18),w=t(21),b=(t(32),t(19)),S=t(20),N=(t(33),function(e){var n=e.sample,t=void 0===n?"":n,a=e.isSample,i=void 0!==a&&a,c=e.saves,l=void 0===c?{}:c,u=e.inputText,s=e.idx,m=e.changeWindow,p=e.loadSample,d=e.saveSample,f=e.deleteSave,v=Object(r.useState)(""),g=Object(S.a)(v,2),h=g[0],_=g[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";d(s,prompt("\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u043e\u0435 \u0438\u043c\u044f",e))},x=o.a.createElement("div",{className:"mixer__group"},o.a.createElement("div",{onClick:E,className:"mixer__sample_header"},"Sample"),o.a.createElement("div",{className:"mixer__sample_load",onClick:function(e){return m(s)}},"\u21d3"),o.a.createElement("textarea",{className:"mixer__sample_wrapper",cols:"30",rows:"10",defaultValue:t,onChange:function(e){return u(e.target.value,s)},onKeyDown:function(e){e.ctrlKey&&83===e.keyCode&&(e.preventDefault(),E(t.split("\n")[0]))}})),w=o.a.createElement("div",{className:"mixer__group"},o.a.createElement("input",{type:"text",className:"mixer__load_search",value:h,onChange:function(e){return _(e.target.value)}}),o.a.createElement("div",{className:"mixer__load_sample",onClick:function(e){return m(s)}},"\u2190"),o.a.createElement("div",{className:"mixer__load_link_wrapper"},function(){var e=[];for(var n in l)e.push([l[n],n]);var t=e.filter(function(e){return new RegExp(h,"ig").test(e[0].human_name)}).map(function(e){return n=e[0],t=e[1],o.a.createElement("button",{key:n.human_name,className:"mixer__load_link","data-tooltip":"\u0434\u043b\u044f \u0443\u0434\u0430\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u043a\u043d\u0443\u0442\u044c \u043f\u0440\u0430\u0432\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u043e\u0439 \u043c\u044b\u0448\u0438",onClick:function(e){p(s,t),m(s)},onContextMenu:function(e){e.preventDefault(),"\u0434\u0430"===prompt("\u0443\u0434\u0430\u043b\u0438\u0442\u044c?","\u0434\u0430")&&f(t)}},n.human_name);var n,t});return 0===t.length?o.a.createElement("div",{className:"mixer__link_empty"},"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u043e\u0434\u0431\u043e\u0440\u043e\u043a \u0441\u0435\u0439\u0447\u0430\u0441 \u043d\u0435\u0442"):t}()));return o.a.createElement("div",{className:"mixer__group_wrapper"},i?x:w)}),y=function(e){var n=e.groups,t=e.addWindow,a=Object(b.a)(e,["groups","addWindow"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"mixer__groups",className:"mixer__groups"},function(){var e=[];for(var t in n)e.push([n[t],t]);return e.map(function(e){return o.a.createElement(N,Object.assign({key:e[1],idx:e[1]},e[0],a))})}(),o.a.createElement(function(){return o.a.createElement("button",{value:"MIX",className:"mixer__add-group",id:"mixer__add-group",onClick:t})},null)))},O=function(e){function n(){return Object(h.a)(this,n),Object(E.a)(this,Object(x.a)(n).apply(this,arguments))}return Object(w.a)(n,e),Object(_.a)(n,[{key:"render",value:function(){var e=this.props.data,n=e.groups,t=e.saves,a=e.mix,r=this.props.onMixChange;return o.a.createElement("div",{className:"App"},o.a.createElement("h1",{onClick:this.props.getMix},"MIXER"),o.a.createElement("div",{className:"mixer__hotkeys"},o.a.createElement("p",null,"ctrl + A - \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430"),o.a.createElement("p",null,"ctrl + Enter - \u0441\u043c\u0435\u0448\u0430\u0442\u044c"),o.a.createElement("p",null,"ctrl + D - \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),o.a.createElement("p",null,"ctrl + S - \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0443")),o.a.createElement(y,Object.assign({groups:n,saves:t},this.props)),o.a.createElement("textarea",{className:"mixer__result",cols:"30",rows:"10",value:a,onChange:function(e){return r(e.target.value)}}))}}]),n}(r.Component),k=Object(l.b)(function(e){return{data:e}},null,function(e,n){var t=e.data,a=n.dispatch;return{data:t,addWindow:function(){a({type:"ADD_WINDOW"})},inputText:function(e,n){a(function(e,n){return{type:"INPUT_TEXT",text:e,idx:n}}(e,n))},changeWindow:function(e){a(function(e){return{type:"CHANGE_WINDOW",idx:e}}(e))},loadSample:function(e,n){a(function(e,n,t){return{type:"LOAD_SAMPLE",idx:e,sample:t[n].sample}}(e,n,t.saves))},saveSample:function(e,n){a(function(e,n,t){return{type:"SAVE_SAMPLE",sample:t[e].sample,name:n}}(e,n,t.groups))},getMix:function(){a({type:"GET_MIX",groups:t.groups})},onMixChange:function(e){a(function(e){return{type:"ON_MIX_CHANGE",value:e}}(e))},deleteSave:function(e){a(function(e){return{type:"DELETE_SAVE",name:e}}(e))}}})(O),A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}t(34);var C=Object(u.b)(a),W=Object(u.c)(C,function(){var e=p;if(void 0!==localStorage.mixer)try{e=JSON.parse(localStorage.mixer)}catch(n){console.dir(n),console.dir(localStorage.mixer)}return e}());W.subscribe(function(){var e=JSON.stringify(W.getState());localStorage.mixer?localStorage.mixer=e:localStorage.setItem("mixer",e)}),W.subscribe(function(){console.log(W.getState())}),c.a.render(o.a.createElement(l.a,{store:W},o.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("","/service-worker.js");A?(function(e,n){fetch(e).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):j(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):j(n,e)})}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.9921cf83.chunk.js.map